import { __extends } from "tslib";
import { BTree } from "@swim/collections";
import { AbstractMapInlet } from "./AbstractMapInlet";
var MapOutput = (function (_super) {
    __extends(MapOutput, _super);
    function MapOutput() {
        var _this = _super.call(this) || this;
        _this._state = new BTree();
        return _this;
    }
    MapOutput.prototype.get = function () {
        return this._state;
    };
    MapOutput.prototype.onReconcileOutputKey = function (key, effect, version) {
        if (effect === 0) {
            if (this._input !== null) {
                var value = this._input.get(key);
                if (value !== void 0) {
                    this._state = this._state.updated(key, value);
                }
                else {
                    this._state = this._state.removed(key);
                }
            }
        }
        else if (effect === 1) {
            this._state = this._state.removed(key);
        }
    };
    return MapOutput;
}(AbstractMapInlet));
export { MapOutput };
//# sourceMappingURL=MapOutput.js.map