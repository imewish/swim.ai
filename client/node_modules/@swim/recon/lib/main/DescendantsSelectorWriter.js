import { __extends } from "tslib";
import { WriterException, Writer } from "@swim/codec";
var DescendantsSelectorWriter = (function (_super) {
    __extends(DescendantsSelectorWriter, _super);
    function DescendantsSelectorWriter(recon, then, step) {
        var _this = _super.call(this) || this;
        _this._recon = recon;
        _this._then = then;
        _this._step = step;
        return _this;
    }
    DescendantsSelectorWriter.prototype.pull = function (output) {
        return DescendantsSelectorWriter.write(output, this._recon, this._then, this._step);
    };
    DescendantsSelectorWriter.sizeOf = function (recon, then) {
        var size = 3;
        size += recon.sizeOfThen(then);
        return size;
    };
    DescendantsSelectorWriter.write = function (output, recon, then, step) {
        if (step === void 0) { step = 1; }
        if (step === 1 && output.isCont()) {
            output = output.write(36);
            step = 3;
        }
        else if (step === 2 && output.isCont()) {
            output = output.write(46);
            step = 3;
        }
        if (step === 3 && output.isCont()) {
            output = output.write(42);
            step = 4;
        }
        if (step === 4 && output.isCont()) {
            output = output.write(42);
            return recon.writeThen(then, output);
        }
        if (output.isDone()) {
            return Writer.error(new WriterException("truncated"));
        }
        else if (output.isError()) {
            return Writer.error(output.trap());
        }
        return new DescendantsSelectorWriter(recon, then, step);
    };
    DescendantsSelectorWriter.writeThen = function (output, recon, then) {
        return DescendantsSelectorWriter.write(output, recon, then, 2);
    };
    return DescendantsSelectorWriter;
}(Writer));
export { DescendantsSelectorWriter };
//# sourceMappingURL=DescendantsSelectorWriter.js.map