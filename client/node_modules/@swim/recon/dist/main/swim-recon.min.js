// swim-recon-3.10.2; copyright 2015-2020 SWIM.AI inc.
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@swim/codec"),require("@swim/structure")):"function"==typeof define&&define.amd?define(["exports","@swim/codec","@swim/structure"],r):r((e=e||self).swim=e.swim||{},e.swim,e.swim)}(this,(function(e,r,t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};function n(e,r){function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var o=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._keyParser=i,s._valueParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._keyParser,this._valueParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);var u=0;e:for(;;){if(1===f){for(;e.isCont()&&(u=e.head(),oe.isWhitespace(u));)e=e.step();if(e.isCont())if(33===u||34===u||36===u||37===u||39===u||40===u||43===u||45===u||u>=48&&u<=57||64===u||91===u||123===u||126===u||oe.isIdentStartChar(u))n=n||i.valueBuilder(),f=2;else{if(35!==u)return n?r.Parser.done(n.bind()):r.Parser.done(i.absent());e=e.step(),f=7}else if(e.isDone())return n?r.Parser.done(n.bind()):r.Parser.done(i.absent())}if(2===f){for(o||(o=i.parseBlockExpression(e));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=3;else if(o.isError())return o}if(3===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont())58===u?(e=e.step(),f=4):(n.push(i.item(o.bind())),o=void 0,f=6);else if(e.isDone())return n.push(i.item(o.bind())),r.Parser.done(n.bind())}if(4===f){for(;e.isCont()&&oe.isSpace(e.head());)e=e.step();if(e.isCont())f=5;else if(e.isDone())return n.push(i.slot(o.bind())),r.Parser.done(n.bind())}if(5===f){for(s||(s=i.parseBlockExpression(e));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())n.push(i.slot(o.bind(),s.bind())),o=void 0,s=void 0,f=6;else if(s.isError())return s}if(6===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(44===u||59===u||oe.isNewline(u)){e=e.step(),f=1;continue}if(35!==u)return r.Parser.done(n.bind());e=e.step(),f=7}else if(e.isDone())return r.Parser.done(n.bind())}if(7===f){for(;e.isCont();){if(u=e.head(),oe.isNewline(u)){f=1;continue e}e=e.step()}if(e.isDone()){f=1;continue}}break}return new t(i,n,o,s,f)},t}(r.Parser),s=function(e){function t(r,t,i,n){var o=e.call(this)||this;return o._recon=r,o._keyParser=t,o._valueParser=i,o._step=n,o}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._keyParser,this._valueParser,this._step)},t.parse=function(e,i,n,o,s){void 0===s&&(s=1);var f=0;if(1===s)if(e.isCont()){if(64!==(f=e.head()))return r.Parser.error(r.Diagnostic.expected(64,e));e=e.step(),s=2}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(64,e));if(2===s){if(n)n=n.feed(e);else if(e.isCont())if(34===(f=e.head())||39===f)n=i.parseString(e);else{if(!oe.isIdentStartChar(f))return r.Parser.error(r.Diagnostic.expected("attribute name",e));n=i.parseIdent(e)}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("attribute name",e));if(n)if(n.isDone())s=3;else if(n.isError())return n.asError()}if(3===s)if(e.isCont()&&40===e.head())e=e.step(),s=4;else if(!e.isEmpty())return r.Parser.done(i.attr(n.bind()));if(4===s){for(;e.isCont()&&(f=e.head(),oe.isWhitespace(f));)e=e.step();if(e.isCont()){if(41===f)return e=e.step(),r.Parser.done(i.attr(n.bind()));s=5}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(")",e))}if(5===s){for(o||(o=i.parseBlock(e));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())s=6;else if(o.isError())return o.asError()}if(6===s){for(;e.isCont()&&(f=e.head(),oe.isWhitespace(f));)e=e.step();if(e.isCont())return 41===f?(e=e.step(),r.Parser.done(i.attr(n.bind(),o.bind()))):r.Parser.error(r.Diagnostic.expected(")",e));if(e.isDone())return r.Parser.error(r.Diagnostic.expected(")",e))}return new t(i,n,o,s)},t}(r.Parser),f=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._fieldParser=i,s._valueParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._fieldParser,this._valueParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);for(var u=0;;){if(1===f)if(e.isCont())if(64===(u=e.head()))o=i.parseAttr(e),f=2;else if(123===u)n=n||i.recordBuilder(),s=i.parseRecord(e,n),f=5;else if(91===u)n=n||i.recordBuilder(),s=i.parseMarkup(e,n),f=5;else if(oe.isIdentStartChar(u))s=i.parseIdent(e),f=4;else if(34===u||39===u)s=i.parseString(e),f=4;else if(45===u||u>=48&&u<=57)s=i.parseNumber(e),f=4;else if(37===u)s=i.parseData(e),f=4;else{if(36!==u)return n?r.Parser.done(n.bind()):r.Parser.done(i.extant());s=i.parseSelector(e),f=4}else if(e.isDone())return n?r.Parser.done(n.bind()):r.Parser.done(i.extant());if(2===f){for(;o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())(n=n||i.valueBuilder()).push(o.bind()),o=void 0,f=3;else if(o.isError())return o.asError()}if(3===f){for(;e.isCont()&&oe.isSpace(e.head());)e=e.step();if(e.isCont()){f=1;continue}if(e.isDone())return r.Parser.done(n.bind())}if(4===f){for(;s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())(n=n||i.valueBuilder()).push(i.item(s.bind())),s=void 0,f=6;else if(s.isError())return s}if(5===f){for(;s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())s=void 0,f=6;else if(s.isError())return s}if(6===f){for(;e.isCont()&&oe.isSpace(e.head());)e=e.step();if(e.isCont()){if(64!==e.head())return r.Parser.done(n.bind());f=1}else if(e.isDone())return r.Parser.done(n.bind())}break}return new t(i,n,o,s,f)},t}(r.Parser),u=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._fieldParser=i,s._valueParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._fieldParser,this._valueParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);var u=0;if(1===f)if(e.isCont())if(64===(u=e.head()))o=i.parseAttr(e),f=2;else if(123===u)n?(s=i.parseRecord(e,n),f=5):(s=i.parseRecord(e),f=4);else{if(91!==u)return n?r.Parser.done(n.bind()):r.Parser.done(i.extant());n?(s=i.parseMarkup(e,n),f=5):(s=i.parseMarkup(e),f=4)}else if(e.isDone())return n?r.Parser.done(n.bind()):r.Parser.done(i.extant());if(2===f){for(;o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())(n=n||i.valueBuilder()).push(o.bind()),o=void 0,f=3;else if(o.isError())return o.asError()}if(3===f)if(e.isCont())if(123===(u=e.head()))s=i.parseRecord(e,n),f=5;else{if(91!==u)return r.Parser.done(n.bind());s=i.parseMarkup(e,n),f=5}else if(e.isDone())return r.Parser.done(n.bind());if(4===f){for(;s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())return(n=n||i.valueBuilder()).push(i.item(s.bind())),r.Parser.done(n.bind());if(s.isError())return s}if(5===f){for(;s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())return r.Parser.done(n.bind());if(s.isError())return s}return new t(i,n,o,s,f)},t}(r.Parser),a=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._keyParser=i,s._valueParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._keyParser,this._valueParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);var u=0;if(1===f)if(e.isCont()){if(123!==(u=e.head()))return r.Parser.error(r.Diagnostic.expected(123,e));e=e.step(),f=2}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(123,e));e:for(;;){if(2===f){for(;e.isCont()&&(u=e.head(),oe.isWhitespace(u));)e=e.step();if(e.isCont()){if(n=n||i.recordBuilder(),125===u)return e=e.step(),r.Parser.done(n.bind());35===u?(e=e.step(),f=8):f=3}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(125,e))}if(3===f){for(o||(o=i.parseBlockExpression(e));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=4;else if(o.isError())return o}if(4===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont())58===u?(e=e.step(),f=5):(n.push(i.item(o.bind())),o=void 0,f=7);else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(125,e))}if(5===f){for(;e.isCont()&&oe.isSpace(e.head());)e=e.step();if(e.isCont())f=6;else if(e.isDone())return n.push(i.slot(o.bind())),r.Parser.done(n.bind())}if(6===f){for(s||(s=i.parseBlockExpression(e));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())n.push(i.slot(o.bind(),s.bind())),o=void 0,s=void 0,f=7;else if(s.isError())return s}if(7===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(44===u||59===u||oe.isNewline(u)){e=e.step(),f=2;continue}if(35!==u)return 125===u?(e=e.step(),r.Parser.done(n.bind())):r.Parser.error(r.Diagnostic.expected("'}', ';', ',', or newline",e));e=e.step(),f=8}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(125,e))}if(8===f){for(;e.isCont();){if(u=e.head(),oe.isNewline(u)){f=2;continue e}e=e.step()}if(e.isDone()){f=2;continue}}break}return new t(i,n,o,s,f)},t}(r.Parser),p=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._textOutput=i,s._valueParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._textOutput,this._valueParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);var u=0;if(1===f)if(e.isCont()){if(91!==(u=e.head()))return r.Parser.error(r.Diagnostic.expected(91,e));e=e.step(),f=2}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(91,e));for(;;){if(2===f){for(;e.isCont()&&64!==(u=e.head())&&91!==u&&92!==u&&93!==u&&123!==u&&125!==u;)e=e.step(),(o=o||i.textOutput()).write(u);if(e.isCont()){if(93===u)return e=e.step(),n=n||i.recordBuilder(),o&&n.push(i.item(o.bind())),r.Parser.done(n.bind());if(64===u)n=n||i.recordBuilder(),o&&(n.push(i.item(o.bind())),o=void 0),s=i.parseInlineItem(e),f=3;else if(123===u)n=n||i.recordBuilder(),o&&(n.push(i.item(o.bind())),o=void 0),s=i.parseRecord(e,n),f=4;else if(91===u)n=n||i.recordBuilder(),o&&(n.push(i.item(o.bind())),o=void 0),s=i.parseMarkup(e,n),f=4;else{if(92!==u)return r.Parser.error(r.Diagnostic.unexpected(e));e=e.step(),f=5}}else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e))}if(3===f){for(;s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){n.push(i.item(s.bind())),s=void 0,f=2;continue}if(s.isError())return s}if(4===f){for(;s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){s=void 0,f=2;continue}if(s.isError())return s}if(5===f){if(e.isCont()){if(u=e.head(),o=o||i.textOutput(),34===u||36===u||39===u||47===u||64===u||91===u||92===u||93===u||123===u||125===u)e=e.step(),o.write(u),f=2;else if(98===u)e=e.step(),o.write(8),f=2;else if(102===u)e=e.step(),o.write(12),f=2;else if(110===u)e=e.step(),o.write(10),f=2;else if(114===u)e=e.step(),o.write(13),f=2;else{if(116!==u)return r.Parser.error(r.Diagnostic.expected("escape character",e));e=e.step(),o.write(9),f=2}continue}if(e.isDone())return r.Parser.error(r.Diagnostic.expected("escape character",e))}break}return new t(i,n,o,s,f)},t}(r.Parser),c=function(e){function t(r,t,i){var n=e.call(this)||this;return n._recon=r,n._base64Parser=t,n._step=i,n}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._base64Parser,this._step)},t.parse=function(e,i,n,o){void 0===o&&(o=1);if(1===o)if(e.isCont()){if(37!==e.head())return r.Parser.error(r.Diagnostic.expected(37,e));e=e.step(),o=2}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(37,e));if(2===o){for(n||(n=r.Base64.standard().parse(e,i.dataOutput()));n.isCont()&&!e.isEmpty();)n=n.feed(e);if(n.isDone())return n;if(n.isError())return n}return new t(i,n,o)},t}(r.Parser),d=function(e){function t(r,t,i){var n=e.call(this)||this;return n._recon=r,n._output=t,n._step=i,n}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._output,this._step)},t.parse=function(e,i,n,o){void 0===o&&(o=1);var s=0;if(1===o)if(e.isCont()){if(s=e.head(),!oe.isIdentStartChar(s))return r.Parser.error(r.Diagnostic.expected("identifier",e));e=e.step(),n=(n=n||i.textOutput()).write(s),o=2}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("identifier",e));if(2===o){for(;e.isCont()&&(s=e.head(),oe.isIdentChar(s));)e=e.step(),n.write(s);if(!e.isEmpty())return r.Parser.done(i.ident(n.bind()))}return new t(i,n,o)},t}(r.Parser),l=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._output=t,s._quote=i,s._code=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._output,this._quote,this._code,this._step)},t.parse=function(e,i,n,o,s,f){void 0===o&&(o=0),void 0===s&&(s=0),void 0===f&&(f=1);var u=0;if(1===f){for(;e.isCont()&&(u=e.head(),oe.isWhitespace(u));)e=e.step();if(e.isCont()){if(34!==u&&(39!==u||o!==u&&0!==o))return r.Parser.error(r.Diagnostic.expected("string",e));e=e.step(),n=n||i.textOutput(),o=u,f=2}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("string",e))}e:for(;;){if(2===f){for(;e.isCont()&&(u=e.head())>=32&&u!==o&&92!==u;)e=e.step(),n.write(u);if(e.isCont()){if(u===o)return e=e.step(),r.Parser.done(n.bind());if(92!==u)return r.Parser.error(r.Diagnostic.expected(o,e));e=e.step(),f=3}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(o,e))}if(3===f)if(e.isCont()){if(34===(u=e.head())||36===u||39===u||47===u||64===u||91===u||92===u||93===u||123===u||125===u){e=e.step(),n.write(u),f=2;continue}if(98===u){e=e.step(),n.write(8),f=2;continue}if(102===u){e=e.step(),n.write(12),f=2;continue}if(110===u){e=e.step(),n.write(10),f=2;continue}if(114===u){e=e.step(),n.write(13),f=2;continue}if(116===u){e=e.step(),n.write(9),f=2;continue}if(117!==u)return r.Parser.error(r.Diagnostic.expected("escape character",e));e=e.step(),f=4}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("escape character",e));if(f>=4)for(;;){if(e.isCont()){if(u=e.head(),r.Base16.isDigit(u)){if(e=e.step(),s=16*s+r.Base16.decodeDigit(u),f<=6){f+=1;continue}n.write(s),s=0,f=2;continue e}return r.Parser.error(r.Diagnostic.expected("hex digit",e))}if(e.isDone())return r.Parser.error(r.Diagnostic.expected("hex digit",e));break}break}return new t(i,n,o,s,f)},t}(r.Parser),h=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._sign=t,s._value=i,s._mode=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._sign,this._value,this._mode,this._step)},t.parse=function(e,i,n,o,s,f){void 0===n&&(n=1),void 0===o&&(o=0),void 0===s&&(s=2),void 0===f&&(f=1);var u=0;if(1===f){for(;e.isCont()&&(u=e.head(),oe.isWhitespace(u));)e=e.step();if(e.isCont())45===u&&(e=e.step(),n=-1),f=2;else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("number",e))}if(2===f)if(e.isCont())if(48===(u=e.head()))e=e.step(),f=4;else{if(!(u>=49&&u<=57))return r.Parser.error(r.Diagnostic.expected("digit",e));e=e.step(),o=n*(u-48),f=3}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("digit",e));if(3===f){for(;e.isCont()&&(u=e.head())>=48&&u<=57;){var a=10*o+n*(u-48);if(!(-9007199254740991<=a&&a<=9007199254740992))return r.Parser.error(r.Diagnostic.message("integer overflow",e));o=a,e=e.step()}if(e.isCont())f=4;else if(e.isDone())return r.Parser.done(i.num(o))}if(4===f){if(e.isCont()){if(u=e.head(),s>0&&46===u||s>1&&(69===u||101===u)){var p=r.Unicode.stringOutput();return p=n<0&&0===o?p.write(45).write(48):p.write(""+o),w.parse(e,i,p,s)}return 120===u&&n>0&&0===o?(e=e.step(),_.parse(e,i)):r.Parser.done(i.num(o))}if(e.isDone())return r.Parser.done(i.num(o))}return new t(i,n,o,s,f)},t.parseInteger=function(e,r){return t.parse(e,r,void 0,void 0,0)},t.parseDecimal=function(e,r){return t.parse(e,r,void 0,void 0,1)},t}(r.Parser),w=function(e){function t(r,t,i,n){var o=e.call(this)||this;return o._recon=r,o._output=t,o._mode=i,o._step=n,o}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._output,this._mode,this._step)},t.parse=function(e,i,n,o,s){void 0===o&&(o=2),void 0===s&&(s=1);var f=0;if(1===s)if(e.isCont())if(46===(f=e.head()))e=e.step(),n=n.write(f),s=2;else{if(!(o>1)||69!==f&&101!==f)return r.Parser.error(r.Diagnostic.expected("decimal or exponent",e));e=e.step(),n=n.write(f),s=5}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("decimal or exponent",e));if(2===s)if(e.isCont()){if(!((f=e.head())>=48&&f<=57))return r.Parser.error(r.Diagnostic.expected("digit",e));e=e.step(),n=n.write(f),s=3}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("digit",e));if(3===s){for(;e.isCont()&&(f=e.head())>=48&&f<=57;)e=e.step(),n=n.write(f);if(e.isCont()){if(!(o>1))return r.Parser.done(i.num(n.bind()));s=4}else if(e.isDone())return r.Parser.done(i.num(n.bind()))}if(4===s){if(69!==(f=e.head())&&101!==f)return r.Parser.done(i.num(n.bind()));e=e.step(),n=n.write(f),s=5}if(5===s)if(e.isCont())43!==(f=e.head())&&45!==f||(e=e.step(),n=n.write(f)),s=6;else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e));if(6===s)if(e.isCont()){if(!((f=e.head())>=48&&f<=57))return r.Parser.error(r.Diagnostic.expected("digit",e));e=e.step(),n=n.write(f),s=7}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected("digit",e));if(7===s){for(;e.isCont()&&(f=e.head())>=48&&f<=57;)e=e.step(),n=n.write(f);if(!e.isEmpty())return r.Parser.done(i.num(n.bind()))}return new t(i,n,o,s)},t}(r.Parser),_=function(e){function t(r,t,i){var n=e.call(this)||this;return n._recon=r,n._value=t,n._size=i,n}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._value,this._size)},t.parse=function(e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);for(var s=0;e.isCont()&&(s=e.head(),r.Base16.isDigit(s));)e=e.step(),n=16*n+r.Base16.decodeDigit(s),o+=1;return e.isEmpty()?new t(i,n,o):o>0?o<=8?r.Parser.done(i.uint32(n)):r.Parser.done(i.uint64(n)):r.Parser.error(r.Diagnostic.expected("hex digit",e))},t}(r.Parser),v=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._bindingsParser=i,s._templateParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._bindingsParser,this._templateParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);if(1===f){for(o||(o=i.parseConditionalOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=2;else if(o.isError())return o.asError()}if(2===f)if(e.isCont()){if(62!==e.head())return o;e=e.step(),f=3}else if(e.isDone())return o;if(3===f){for(s||(s=i.parseConditionalOperator(e));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){var u=o.bind(),a=s.bind();return r.Parser.done(i.lambda(u,a))}if(s.isError())return s.asError()}return new t(i,n,o,s,f)},t}(r.Parser),y=function(e){function t(r,t,i,n,o,s){var f=e.call(this)||this;return f._recon=r,f._builder=t,f._ifParser=i,f._thenParser=n,f._elseParser=o,f._step=s,f}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._ifParser,this._thenParser,this._elseParser,this._step)},t.parse=function(e,i,n,o,s,f,u){void 0===u&&(u=1);var a=0;if(1===u){for(o||(o=i.parseOrOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())u=2;else if(o.isError())return o.asError()}if(2===u){for(;e.isCont()&&(a=e.head(),oe.isSpace(a));)e=e.step();if(e.isCont()){if(63!==a)return o;e=e.step(),u=3}else if(e.isDone())return o}if(3===u){for(s||(s=i.parseConditionalOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())u=4;else if(s.isError())return s.asError()}if(4===u){for(;e.isCont()&&(a=e.head(),oe.isSpace(a));)e=e.step();if(e.isCont()){if(58!==a)return r.Parser.error(r.Diagnostic.expected(58,e));e=e.step(),u=5}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(58,e))}if(5===u){for(f||(f=i.parseConditionalOperator(e,n));f.isCont()&&!e.isEmpty();)f=f.feed(e);if(f.isDone()){var p=o.bind(),c=s.bind(),d=f.bind();return r.Parser.done(i.conditional(p,c,d))}if(f.isError())return f.asError()}return new t(i,n,o,s,f,u)},t}(r.Parser),O=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._lhsParser=i,s._rhsParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);for(;;){if(1===f){for(o||(o=i.parseAndOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=2;else if(o.isError())return o.asError()}if(2===f)if(e.isCont()){if(124!==e.head())return o;e=e.step(),f=3}else if(e.isDone())return o;if(3===f){for(s||(s=i.parseAndOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){var u=o.bind(),a=s.bind();o=r.Parser.done(i.or(u,a)),s=void 0,f=2;continue}if(s.isError())return s.asError()}break}return new t(i,n,o,s,f)},t}(r.Parser),P=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._lhsParser=i,s._rhsParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);for(;;){if(1===f){for(o||(o=i.parseBitwiseOrOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=2;else if(o.isError())return o.asError()}if(2===f)if(e.isCont()){if(38!==e.head())return o;e=e.step(),f=3}else if(e.isDone())return o;if(3===f){for(s||(s=i.parseBitwiseOrOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){var u=o.bind(),a=s.bind();o=r.Parser.done(i.and(u,a)),s=void 0,f=2;continue}if(s.isError())return s.asError()}break}return new t(i,n,o,s,f)},t}(r.Parser),m=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._lhsParser=i,s._rhsParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);for(var u=0;;){if(1===f){for(o||(o=i.parseBitwiseXorOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=2;else if(o.isError())return o.asError()}if(2===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(124!==u)return o;e=e.step(),f=3}else if(e.isDone())return o}if(3===f)if(e.isCont()){if(124===(u=e.head()))return o;f=4}else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e));if(4===f){for(s||(s=i.parseBitwiseXorOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){var a=o.bind(),p=s.bind();o=r.Parser.done(i.bitwiseOr(a,p)),s=void 0,f=2;continue}if(s.isError())return s.asError()}break}return new t(i,n,o,s,f)},t}(r.Parser),C=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._lhsParser=i,s._rhsParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);for(var u=0;;){if(1===f){for(o||(o=i.parseBitwiseAndOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=2;else if(o.isError())return o.asError()}if(2===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(94!==u)return o;e=e.step(),f=3}else if(e.isDone())return o}if(3===f){for(s||(s=i.parseBitwiseAndOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){var a=o.bind(),p=s.bind();o=r.Parser.done(i.bitwiseXor(a,p)),s=void 0,f=2;continue}if(s.isError())return s.asError()}break}return new t(i,n,o,s,f)},t}(r.Parser),E=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._lhsParser=i,s._rhsParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);for(var u=0;;){if(1===f){for(o||(o=i.parseComparisonOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=2;else if(o.isError())return o.asError()}if(2===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(38!==u)return o;e=e.step(),f=3}else if(e.isDone())return o}if(3===f)if(e.isCont()){if(38===(u=e.head()))return o;f=4}else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e));if(4===f){for(s||(s=i.parseComparisonOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){var a=o.bind(),p=s.bind();o=r.Parser.done(i.bitwiseAnd(a,p)),s=void 0,f=2;continue}if(s.isError())return s.asError()}break}return new t(i,n,o,s,f)},t}(r.Parser),D=function(e){function t(r,t,i,n,o,s){var f=e.call(this)||this;return f._recon=r,f._builder=t,f._lhsParser=i,f._operator=n,f._rhsParser=o,f._step=s,f}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._lhsParser,this._operator,this._rhsParser,this._step)},t.parse=function(e,i,n,o,s,f,u){void 0===u&&(u=1);var a=0;if(1===u){for(o||(o=i.parseAttrExpression(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())u=2;else if(o.isError())return o.asError()}if(2===u){for(;e.isCont()&&(a=e.head(),oe.isSpace(a));)e=e.step();if(e.isCont())if(33===a)e=e.step(),u=3;else if(60===a)e=e.step(),u=4;else if(62===a)e=e.step(),u=5;else{if(61!==a)return o;e=e.step(),u=6}else if(e.isDone())return o}if(3===u)if(e.isCont())61===(a=e.head())?(e=e.step(),s="!=",u=7):(s="!",u=7);else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e));if(4===u)if(e.isCont())61===(a=e.head())?(e=e.step(),s="<=",u=7):(s="<",u=7);else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e));if(5===u)if(e.isCont())61===(a=e.head())?(e=e.step(),s=">=",u=7):(s=">",u=7);else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e));if(6===u)if(e.isCont())if(61===(a=e.head()))e=e.step(),s="==",u=7;else{if(62===a)return o;s="=",u=7}else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e));if(7===u){for(f||(f=i.parseAttrExpression(e,n));f.isCont()&&!e.isEmpty();)f=f.feed(e);if(f.isDone()){var p=o.bind(),c=f.bind();return"<"===s?r.Parser.done(i.lt(p,c)):"<="===s?r.Parser.done(i.le(p,c)):"=="===s?r.Parser.done(i.eq(p,c)):"!="===s?r.Parser.done(i.ne(p,c)):">="===s?r.Parser.done(i.ge(p,c)):">"===s?r.Parser.done(i.gt(p,c)):r.Parser.error(r.Diagnostic.message(s,e))}if(f.isError())return f.asError()}return new t(i,n,o,s,f,u)},t}(r.Parser),x=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._fieldParser=i,s._valueParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._fieldParser,this._valueParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);for(var u=0;;){if(1===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont())if(64===u)f=2;else if(123===u||91===u)n=n||i.recordBuilder(),f=5;else if(40===u)f=4;else{if(!(33===u||34===u||36===u||37===u||39===u||43===u||45===u||u>=48&&u<=57||126===u||oe.isIdentStartChar(u)))return n?r.Parser.done(n.bind()):r.Parser.done(i.extant());f=3}else if(e.isDone())return n?r.Parser.done(n.bind()):r.Parser.done(i.extant())}if(2===f){for(o||(o=i.parseAttr(e));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone()){(n=n||i.recordBuilder()).push(o.bind()),o=void 0,f=1;continue}if(o.isError())return o.asError()}if(3===f){for(s||(s=i.parseAdditiveOperator(e));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())(n=n||i.valueBuilder()).push(i.item(s.bind())),s=void 0,f=6;else if(s.isError())return s.asError()}if(4===f){for(s||(s=i.parseAdditiveOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())n||(n=i.valueBuilder()).push(i.item(s.bind())),s=void 0,f=6;else if(s.isError())return s.asError()}if(5===f){for(s||(s=i.parseAdditiveOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())s=void 0,f=6;else if(s.isError())return s.asError()}if(6===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(64===u){f=1;continue}return r.Parser.done(n.bind())}if(e.isDone())return r.Parser.done(n.bind())}break}return new t(i,n,o,s,f)},t}(r.Parser),z=function(e){function t(r,t,i,n,o,s){var f=e.call(this)||this;return f._recon=r,f._builder=t,f._lhsParser=i,f._operator=n,f._rhsParser=o,f._step=s,f}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._lhsParser,this._operator,this._rhsParser,this._step)},t.parse=function(e,i,n,o,s,f,u){void 0===u&&(u=1);for(var a=0;;){if(1===u){for(o||(o=i.parseMultiplicativeOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())u=2;else if(o.isError())return o.asError()}if(2===u){for(;e.isCont()&&(a=e.head(),oe.isSpace(a));)e=e.step();if(e.isCont())if(43===a)e=e.step(),s="+",u=3;else{if(45!==a)return o;e=e.step(),s="-",u=3}else if(e.isDone())return o}if(3===u){for(f||(f=i.parseMultiplicativeOperator(e,n));f.isCont()&&!e.isEmpty();)f=f.feed(e);if(f.isDone()){var p=o.bind(),c=f.bind();if("+"===s)o=r.Parser.done(i.plus(p,c));else{if("-"!==s)return r.Parser.error(r.Diagnostic.message(s,e));o=r.Parser.done(i.minus(p,c))}f=void 0,s=void 0,u=2;continue}if(f.isError())return f.asError()}break}return new t(i,n,o,s,f,u)},t}(r.Parser),b=function(e){function t(r,t,i,n,o,s){var f=e.call(this)||this;return f._recon=r,f._builder=t,f._lhsParser=i,f._operator=n,f._rhsParser=o,f._step=s,f}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._lhsParser,this._operator,this._rhsParser,this._step)},t.parse=function(e,i,n,o,s,f,u){void 0===u&&(u=1);for(var a=0;;){if(1===u){for(o||(o=i.parsePrefixOperator(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())u=2;else if(o.isError())return o.asError()}if(2===u){for(;e.isCont()&&(a=e.head(),oe.isSpace(a));)e=e.step();if(e.isCont())if(42===a)e=e.step(),s="*",u=3;else if(47===a)e=e.step(),s="/",u=3;else{if(37!==a)return o;e=e.step(),s="%",u=3}else if(e.isDone())return o}if(3===u){for(f||(f=i.parsePrefixOperator(e,n));f.isCont()&&!e.isEmpty();)f=f.feed(e);if(f.isDone()){var p=o.bind(),c=f.bind();if("*"===s)o=r.Parser.done(i.times(p,c));else if("/"===s)o=r.Parser.done(i.divide(p,c));else{if("%"!==s)return r.Parser.error(r.Diagnostic.message(s,e));o=r.Parser.done(i.modulo(p,c))}f=void 0,s=void 0,u=2;continue}if(f.isError())return f.asError()}break}return new t(i,n,o,s,f,u)},t}(r.Parser),S=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._operator=i,s._operandParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._operator,this._operandParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);var u=0;if(1===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(33===u)e=e.step(),o="!";else if(126===u)e=e.step(),o="~";else if(45===u)e=e.step(),o="-";else{if(43!==u)return i.parseInvokeOperator(e,n);e=e.step(),o="+"}f=2}else if(e.isDone())return i.parseInvokeOperator(e,n)}if(2===f){for(s||(s=i.parsePrefixOperator(e,n));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone()){var a=s.bind();return i.isDistinct(a)?"!"===o?r.Parser.done(i.not(a)):"~"===o?r.Parser.done(i.bitwiseNot(a)):"-"===o?r.Parser.done(i.negative(a)):"+"===o?r.Parser.done(i.positive(a)):r.Parser.error(r.Diagnostic.message(o,e)):r.Parser.error(r.Diagnostic.expected("value",e))}if(s.isError())return s.asError()}return new t(i,n,o,s,f)},t}(r.Parser),g=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._exprParser=i,s._argsParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._exprParser,this._argsParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);var u=0;if(1===f){for(o||(o=i.parsePrimary(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())f=2;else if(o.isError())return o.asError()}for(;;){if(2===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(40!==u)return o;e=e.step(),f=3}else if(e.isDone())return o}if(3===f){for(;e.isCont()&&(u=e.head(),oe.isWhitespace(u));)e=e.step();if(e.isCont()){if(41===u){e=e.step();var a=o.bind();o=r.Parser.done(i.invoke(a,i.extant())),f=2;continue}f=4}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(41,e))}if(4===f){for(s||(s=i.parseBlock(e));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())f=5;else if(s.isError())return s.asError()}if(5===f){for(;e.isCont()&&(u=e.head(),oe.isWhitespace(u));)e=e.step();if(e.isCont()){if(41===u){e=e.step();a=o.bind();var p=s.bind();o=r.Parser.done(i.invoke(a,p)),s=void 0,f=2;continue}return r.Parser.error(r.Diagnostic.expected(41,e))}if(e.isDone())return r.Parser.error(r.Diagnostic.expected(41,e))}break}return new t(i,n,o,s,f)},t}(r.Parser),W=function(e){function t(r,t,i,n){var o=e.call(this)||this;return o._recon=r,o._builder=t,o._exprParser=i,o._step=n,o}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._exprParser,this._step)},t.parse=function(e,i,n,o,s){void 0===s&&(s=1);var f=0;if(1===s){for(;e.isCont()&&(f=e.head(),oe.isSpace(f));)e=e.step();e.isCont()?40===f?(e=e.step(),s=3):s=2:e.isDone()&&(s=2)}if(2===s){for(o||(o=i.parseLiteral(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())return o;if(o.isError())return o.asError()}if(3===s){for(o||(o=i.parseBlockExpression(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())s=4;else if(o.isError())return o.asError()}for(;;){if(4===s){for(;e.isCont()&&(f=e.head(),oe.isSpace(f));)e=e.step();if(e.isCont()){if(44!==f)return 41===f?(e=e.step(),o||r.Parser.done(n.bind())):r.Parser.error(r.Diagnostic.expected(41,e));e=e.step(),o&&(n||(n=i.recordBuilder()).push(i.item(o.bind())),o=void 0),s=5}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(41,e))}if(5===s){for(o||(o=i.parseBlockExpression(e,n));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone()){o=void 0,s=4;continue}if(o.isError())return o.asError()}break}return new t(i,n,o,s)},t}(r.Parser),k=function(e){function t(r,t,i,n){var o=e.call(this)||this;return o._recon=r,o._builder=t,o._valueParser=i,o._step=n,o}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._valueParser,this._step)},t.parse=function(e,i,n,o,s){void 0===s&&(s=1);var f=0;if(1===s){for(;e.isCont()&&(f=e.head(),oe.isSpace(f));)e=e.step();if(e.isCont())if(40===f)e=e.step(),s=4;else if(123===f)n=n||i.recordBuilder(),o=i.parseRecord(e,n),s=3;else if(91===f)n=n||i.recordBuilder(),o=i.parseMarkup(e,n),s=3;else if(oe.isIdentStartChar(f))o=i.parseIdent(e),s=2;else if(34===f||39===f)o=i.parseString(e),s=2;else if(45===f||f>=48&&f<=57)o=i.parseNumber(e),s=2;else if(37===f)o=i.parseData(e),s=2;else{if(36!==f)return n?r.Parser.done(n.bind()):r.Parser.done(i.extant());o=i.parseSelector(e),s=2}else if(e.isDone())return n?r.Parser.done(n.bind()):r.Parser.done(i.extant())}if(2===s){for(;o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())return(n=n||i.valueBuilder()).push(i.item(o.bind())),r.Parser.done(n.bind());if(o.isError())return o.asError()}if(3===s){for(;o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())return r.Parser.done(n.bind());if(o.isError())return o.asError()}if(4===s){for(o||(o=i.parseBlockExpression(e));o.isCont()&&!e.isEmpty();)o=o.feed(e);if(o.isDone())s=5;else if(o.isError())return o.asError()}if(5===s){for(;e.isCont()&&(f=e.head(),oe.isWhitespace(f));)e=e.step();if(e.isCont())return 41===f?(e=e.step(),(n=n||i.valueBuilder()).push(i.item(o.bind())),r.Parser.done(n.bind())):r.Parser.error(r.Diagnostic.expected(41,e));if(e.isDone())return r.Parser.error(r.Diagnostic.expected(41,e))}return new t(i,n,o,s)},t}(r.Parser),B=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._builder=t,s._selector=i,s._valueParser=n,s._step=o,s}return n(t,e),t.prototype.feed=function(e){return t.parse(e,this._recon,this._builder,this._selector,this._valueParser,this._step)},t.parse=function(e,i,n,o,s,f){void 0===f&&(f=1);var u=0;if(1===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()&&36===u)e=e.step(),o=o||i.selector(),f=2;else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(36,e))}if(2===f)if(e.isCont())91===(u=e.head())?(e=e.step(),f=8):64===u?(e=e.step(),f=7):58===u?(e=e.step(),f=6):42===u?(e=e.step(),f=5):35===u?(e=e.step(),f=4):f=3;else if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e));for(;;){if(3===f){for(s||(s=i.parseLiteral(e,i.valueBuilder()));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())o=i.get(o,s.bind()),s=void 0,f=10;else if(s.isError())return s.asError()}if(4===f){for(s||(s=i.parseInteger(e));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())o=i.value(i.getItem(o,s.bind())),s=void 0,f=10;else if(s.isError())return s.asError()}if(5===f&&(e.isCont()?58===(u=e.head())?(e=e.step(),o=i.keys(o),f=10):42===u?(e=e.step(),o=i.descendants(o),f=10):(o=i.children(o),f=10):e.isDone()&&(o=i.children(o),f=10)),6===f)if(e.isCont()){if(42!==(u=e.head()))return r.Parser.error(r.Diagnostic.expected(42,e));e=e.step(),o=i.values(o),f=10}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(42,e));if(7===f){for(s||(s=i.parseIdent(e));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())o=i.getAttr(o,s.bind()),s=void 0,f=10;else if(s.isError())return s.asError()}if(8===f){for(s||(s=i.parseBlockExpression(e));s.isCont()&&!e.isEmpty();)s=s.feed(e);if(s.isDone())f=9;else if(s.isError())return s.asError()}if(9===f){for(;e.isCont()&&(u=e.head(),oe.isSpace(u));)e=e.step();if(e.isCont()){if(93!==u)return r.Parser.error(r.Diagnostic.expected(93,e));e=e.step(),o=i.filter(o,s.bind()),s=void 0,f=10}else if(e.isDone())return r.Parser.error(r.Diagnostic.expected(93,e))}if(10===f)if(e.isCont()){if(91===(u=e.head())){e=e.step(),f=8;continue}if(35===u){e=e.step(),f=4;continue}if(46!==u)return n?(n.push(i.item(o)),r.Parser.done(n.bind())):r.Parser.done(o);e=e.step(),f=11}else if(e.isDone())return n?(n.push(i.item(o)),r.Parser.done(n.bind())):r.Parser.done(o);if(11===f){if(e.isCont()){if(64===(u=e.head())){e=e.step(),f=7;continue}if(58===u){e=e.step(),f=6;continue}if(42===u){e=e.step(),f=5;continue}f=3;continue}if(e.isDone())return r.Parser.error(r.Diagnostic.unexpected(e))}break}return new t(i,n,o,s,f)},t}(r.Parser),I=function(){function e(){}return e.prototype.parseBlock=function(e){return o.parse(e,this)},e.prototype.parseAttr=function(e){return s.parse(e,this)},e.prototype.parseBlockItem=function(e){return f.parse(e,this)},e.prototype.parseInlineItem=function(e){return u.parse(e,this)},e.prototype.parseRecord=function(e,r){return a.parse(e,this,r)},e.prototype.parseMarkup=function(e,r){return p.parse(e,this,r)},e.prototype.parseData=function(e){return c.parse(e,this)},e.prototype.parseIdent=function(e){return d.parse(e,this)},e.prototype.parseString=function(e){return l.parse(e,this)},e.prototype.parseNumber=function(e){return h.parse(e,this)},e.prototype.parseInteger=function(e){return h.parseInteger(e,this)},e.prototype.parseBlockExpression=function(e,r){return this.parseLambdaFunc(e,r)},e.prototype.parseLambdaFunc=function(e,r){return v.parse(e,this,r)},e.prototype.parseConditionalOperator=function(e,r){return y.parse(e,this,r)},e.prototype.parseOrOperator=function(e,r){return O.parse(e,this,r)},e.prototype.parseAndOperator=function(e,r){return P.parse(e,this,r)},e.prototype.parseBitwiseOrOperator=function(e,r){return m.parse(e,this,r)},e.prototype.parseBitwiseXorOperator=function(e,r){return C.parse(e,this,r)},e.prototype.parseBitwiseAndOperator=function(e,r){return E.parse(e,this,r)},e.prototype.parseComparisonOperator=function(e,r){return D.parse(e,this,r)},e.prototype.parseAttrExpression=function(e,r){return x.parse(e,this,r)},e.prototype.parseAdditiveOperator=function(e,r){return z.parse(e,this,r)},e.prototype.parseMultiplicativeOperator=function(e,r){return b.parse(e,this,r)},e.prototype.parsePrefixOperator=function(e,r){return S.parse(e,this,r)},e.prototype.parseInvokeOperator=function(e,r){return g.parse(e,this,r)},e.prototype.parsePrimary=function(e,r){return W.parse(e,this,r)},e.prototype.parseLiteral=function(e,r){return k.parse(e,this,r)},e.prototype.parseSelector=function(e,r){return B.parse(e,this,r)},e.prototype.blockParser=function(){return new o(this)},e.prototype.parseBlockString=function(e){for(var t=r.Unicode.stringInput(e);t.isCont()&&oe.isWhitespace(t.head());)t=t.step();var i=this.parseBlock(t);if(i.isDone())for(;t.isCont()&&oe.isWhitespace(t.head());)t=t.step();return t.isCont()&&!i.isError()&&(i=r.Parser.error(r.Diagnostic.unexpected(t))),i.bind()},e.prototype.parseNumberString=function(e){for(var t=r.Unicode.stringInput(e);t.isCont()&&oe.isWhitespace(t.head());)t=t.step();var i=this.parseNumber(t);if(i.isDone())for(;t.isCont()&&oe.isWhitespace(t.head());)t=t.step();return t.isCont()&&!i.isError()&&(i=r.Parser.error(r.Diagnostic.unexpected(t))),i.bind()},e}(),T=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.isDistinct=function(e){return e.isDistinct()},r.prototype.item=function(e){return e},r.prototype.value=function(e){return e.toValue()},r.prototype.attr=function(e,r){return t.Attr.of.apply(t.Attr,arguments)},r.prototype.slot=function(e,r){return t.Slot.of.apply(t.Slot,arguments)},r.prototype.valueBuilder=function(){return t.Value.builder()},r.prototype.recordBuilder=function(){return t.Record.create()},r.prototype.dataOutput=function(){return t.Data.output()},r.prototype.textOutput=function(){return t.Text.output()},r.prototype.ident=function(e){if(e instanceof t.Text){var r=e.stringValue();if("true"===r)return t.Bool.from(!0);if("false"===r)return t.Bool.from(!1)}return e},r.prototype.num=function(e){if("number"==typeof e)return t.Num.from(e);if("string"==typeof e)return t.Num.from(+e);throw new TypeError(""+e)},r.prototype.uint32=function(e){return t.Num.uint32(e)},r.prototype.uint64=function(e){return t.Num.uint64(e)},r.prototype.bool=function(e){return t.Bool.from(e)},r.prototype.selector=function(){return t.Selector.identity()},r.prototype.extant=function(){return t.Value.extant()},r.prototype.absent=function(){return t.Value.absent()},r.prototype.conditional=function(e,r,t){return e.conditional(r,t)},r.prototype.or=function(e,r){return new t.OrOperator(e,r)},r.prototype.and=function(e,r){return new t.AndOperator(e,r)},r.prototype.bitwiseOr=function(e,r){return new t.BitwiseOrOperator(e,r)},r.prototype.bitwiseXor=function(e,r){return new t.BitwiseXorOperator(e,r)},r.prototype.bitwiseAnd=function(e,r){return new t.BitwiseAndOperator(e,r)},r.prototype.lt=function(e,r){return new t.LtOperator(e,r)},r.prototype.le=function(e,r){return new t.LeOperator(e,r)},r.prototype.eq=function(e,r){return new t.EqOperator(e,r)},r.prototype.ne=function(e,r){return new t.NeOperator(e,r)},r.prototype.ge=function(e,r){return new t.GeOperator(e,r)},r.prototype.gt=function(e,r){return new t.GtOperator(e,r)},r.prototype.plus=function(e,r){return new t.PlusOperator(e,r)},r.prototype.minus=function(e,r){return new t.MinusOperator(e,r)},r.prototype.times=function(e,r){return new t.TimesOperator(e,r)},r.prototype.divide=function(e,r){return new t.DivideOperator(e,r)},r.prototype.modulo=function(e,r){return new t.ModuloOperator(e,r)},r.prototype.not=function(e){return new t.NotOperator(e)},r.prototype.bitwiseNot=function(e){return new t.BitwiseNotOperator(e)},r.prototype.negative=function(e){return e instanceof t.Num?e.negative():new t.NegativeOperator(e)},r.prototype.positive=function(e){return new t.PositiveOperator(e)},r.prototype.invoke=function(e,r){return new t.InvokeOperator(e,r)},r.prototype.lambda=function(e,r){return e.lambda(r)},r.prototype.get=function(e,r){return e.get(r)},r.prototype.getAttr=function(e,r){return e.getAttr(r)},r.prototype.getItem=function(e,r){return e.getItem(r)},r.prototype.children=function(e){return t.Selector.literal(e).children()},r.prototype.descendants=function(e){return t.Selector.literal(e).descendants()},r.prototype.keys=function(e){return t.Selector.literal(e).keys()},r.prototype.values=function(e){return t.Selector.literal(e).values()},r.prototype.filter=function(e,r){return e.filter(r)},r}(I),A=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._key=t,s._value=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._key,this._value,this._part,this._step)},t.sizeOf=function(e,r,t){var i=0;return i+=1,i+=e.sizeOfValue(r),e.isExtant(e.item(t))||(i+=1,i+=e.sizeOfBlockValue(t),i+=1),i},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f&&e.isCont()&&(e=e.write(64),f=2),2===f)if((s=s?s.pull(e):i.writeValue(n,e)).isDone()){if(s=void 0,i.isExtant(i.item(o)))return r.Writer.done();f=3}else if(s.isError())return s.asError();if(3===f&&e.isCont()&&(e=e.write(40),f=4),4===f)if((s=s?s.pull(e):i.writeBlockValue(o,e)).isDone())s=void 0,f=5;else if(s.isError())return s.asError();return 5===f&&e.isCont()?(e=e.write(41),r.Writer.done()):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t}(r.Writer),V=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._key=t,s._value=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._key,this._value,this._part,this._step)},t.sizeOf=function(e,r,t){var i=0;return i+=e.sizeOfValue(r),i+=1,e.isExtant(e.item(t))||(i+=e.sizeOfValue(t)),i},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f)if((s=s?s.pull(e):i.writeValue(n,e)).isDone())s=void 0,f=2;else if(s.isError())return s.asError();if(2===f&&e.isCont()){if(e=e.write(58),i.isExtant(i.item(o)))return r.Writer.done();f=3}if(3===f){if((s=s?s.pull(e):i.writeValue(o,e)).isDone())return r.Writer.done();if(s.isError())return s.asError()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t}(r.Writer),N=function(e){function t(r,t,i,n,o,s,f,u,a,p,c,d){var l=e.call(this)||this;return l._recon=r,l._items=t,l._inBlock=i,l._inMarkup=n,l._inBraces=o,l._inBrackets=s,l._first=f,l._markupSafe=u,l._item=a,l._next=p,l._part=c,l._step=d,l}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._items,this._inBlock,this._inMarkup,this._inBraces,this._inBrackets,this._first,this._markupSafe,this._item,this._next,this._part,this._step)},t.sizeOf=function(e,r,i,n){for(var o,s=0,f=!1,u=!1,a=!0,p=!0;o||r.hasNext();){var c=void 0;o?(c=o,o=void 0):c=r.next().value,r.hasNext()&&(o=r.next().value),e.isExpression(c)&&(p=!1),u&&e.isAttr(c)&&(f&&(s+=1,f=!1),s+=1,u=!1),e.isAttr(c)?(f?(s+=1,f=!1):u&&(s+=1,u=!1),s+=e.sizeOfItem(c),a=!1):u&&e.isText(c)?(f&&(s+=1,f=!1),s+=e.sizeOfMarkupText(c)):f?(a?a=!1:s+=1,s+=t.sizeOfBlockItem(e,c)):u?e.isRecord(c)&&e.isMarkupSafe(e.items(c))?(s+=e.sizeOfBlock(e.items(c),!1,!0),o&&e.isText(o)?(s+=e.sizeOfMarkupText(o),o=void 0):o&&!e.isAttr(o)?(s+=1,f=!0,a=!0):(s+=1,u=!1)):(s+=1,s+=e.sizeOfItem(c),f=!0,a=!1):p&&e.isText(c)&&o&&!e.isField(o)&&!e.isText(o)&&!e.isBool(o)?(s+=1,s+=e.sizeOfMarkupText(c),u=!0):i&&!f?(a?a=!1:s+=1,s+=t.sizeOfBlockItem(e,c)):n&&e.isText(c)&&!o?(s+=1,s+=e.sizeOfMarkupText(c),s+=1):!n&&e.isValue(c)&&!e.isRecord(c)&&(!a&&!o||o&&e.isAttr(o))?(!a&&(e.isText(c)&&e.isIdent(c)||e.isNum(c)||e.isBool(c))&&(s+=1),s+=e.sizeOfItem(c)):(s+=1,s+=e.sizeOfItem(c),f=!0,a=!1)}return f&&(s+=1),u&&(s+=1),s},t.sizeOfBlockItem=function(e,r){var t=0;return e.isField(r)?t+=e.sizeOfSlot(e.key(r),e.value(r)):t+=e.sizeOfItem(r),t},t.write=function(e,i,n,o,s,f,u,a,p,c,d,l,h){for(void 0===f&&(f=!1),void 0===u&&(u=!1),void 0===a&&(a=!0),void 0===p&&(p=!0),void 0===h&&(h=1);;){if(1===h){if(!d&&!n.hasNext()){h=10;break}d?(c=d,d=void 0):c=n.next().value,n.hasNext()&&(d=n.next().value),i.isExpression(c)&&(p=!1),h=2}if(2===h&&e.isCont()&&(u&&i.isAttr(c)?(f&&(e=e.write(125),f=!1),h=3):h=4),3===h&&e.isCont()&&(e=e.write(93),u=!1,h=4),4===h&&e.isCont()&&(i.isAttr(c)?(f?(e=e.write(125),f=!1):u&&(e=e.write(93),u=!1),l=i.writeItem(c,e),a=!1,h=7):u&&i.isText(c)?(f&&(e=e.write(125),f=!1),l=i.writeMarkupText(c,e),h=7):f?(a?a=!1:e=e.write(44),l=t.writeBlockItem(e,i,c),h=7):u?i.isRecord(c)&&i.isMarkupSafe(i.items(c))?(l=i.writeBlock(i.items(c),e,!1,!0),h=5):(e=e.write(123),l=i.writeItem(c,e),f=!0,a=!1,h=7):p&&i.isText(c)&&d&&!i.isField(d)&&!i.isText(d)&&!i.isBool(d)?(e=e.write(91),l=i.writeMarkupText(c,e),u=!0,h=7):o&&!f?(a?a=!1:e=e.write(44),l=t.writeBlockItem(e,i,c),h=7):s&&i.isText(c)&&!d?(e=e.write(91),l=i.writeMarkupText(c,e),h=8):!s&&i.isValue(c)&&!i.isRecord(c)&&(!a&&!d||d&&i.isAttr(d))?(!a&&(i.isText(c)&&i.isIdent(c)||i.isNum(c)||i.isBool(c))&&(e=e.write(32)),l=i.writeItem(c,e),h=7):(e=e.write(123),l=i.writeItem(c,e),f=!0,a=!1,h=7)),5===h)if((l=l.pull(e)).isDone())l=void 0,h=6;else if(l.isError())return l.asError();if(6===h&&e.isCont()){if(!d||!i.isText(d)){if(d&&!i.isAttr(d)){e=e.write(123),f=!0,a=!0,h=1;continue}e=e.write(93),u=!1,h=1;continue}l=i.writeMarkupText(d,e),d=void 0,h=7}if(7===h){if((l=l.pull(e)).isDone()){l=void 0,h=1;continue}if(l.isError())return l.asError()}if(8===h)if((l=l.pull(e)).isDone())l=void 0,h=9;else if(l.isError())return l.asError();if(9!==h||!e.isCont())break;e=e.write(93),h=1}if(10===h&&(f?e.isCont()&&(e=e.write(125),h=11):h=11),11===h){if(!u)return r.Writer.done();if(e.isCont())return e=e.write(93),r.Writer.done()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f,u,a,p,c,d,l,h)},t.writeBlockItem=function(e,r,t){return r.isField(t)?r.writeSlot(r.key(t),r.value(t),e):r.writeItem(t,e)},t}(r.Writer),R=function(e){function t(r,t,i,n,o,s,f,u){var a=e.call(this)||this;return a._recon=r,a._items=t,a._inParens=i,a._first=n,a._item=o,a._next=s,a._part=f,a._step=u,a}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._items,this._inParens,this._first,this._item,this._next,this._part,this._step)},t.sizeOf=function(e,r){for(var t,i=0,n=!1,o=!0;t||r.hasNext();){var s=void 0;t?(s=t,t=void 0):s=r.next().value,r.hasNext()&&(t=r.next().value),n||o||(i+=1),e.isAttr(s)?(n&&(i+=1,n=!1),i+=e.sizeOfItem(s),o=!1):n?(o?o=!1:i+=1,i+=e.sizeOfBlockItem(s)):e.isValue(s)&&!e.isRecord(s)&&(!o&&!t||t&&e.isAttr(t))?i+=e.sizeOfItem(s):(i+=1,i+=e.sizeOfItem(s),n=!0,o=!1)}return n&&(i+=1),i},t.write=function(e,i,n,o,s,f,u,a,p){for(void 0===o&&(o=!1),void 0===s&&(s=!0),void 0===p&&(p=1);;){if(1===p){if(!u&&!n.hasNext()){p=5;break}u?(f=u,u=void 0):f=n.next().value,n.hasNext()&&(u=n.next().value),p=2}if(2===p&&e.isCont()&&(o||s||(e=e.write(32)),p=3),3===p&&e.isCont()&&(i.isAttr(f)?(o&&(e=e.write(41),o=!1),a=i.writeItem(f,e),s=!1,p=4):o?(s?s=!1:e=e.write(44),a=i.writeBlockItem(f,e),p=4):i.isValue(f)&&!i.isRecord(f)&&(!s&&!u||u&&i.isAttr(u))?(a=i.writeItem(f,e),p=4):(e=e.write(40),a=i.writeItem(f,e),o=!0,s=!1,p=4)),4===p){if((a=a.pull(e)).isDone()){a=void 0,p=1;continue}if(a.isError())return a.asError()}break}if(5===p){if(!o)return r.Writer.done();if(e.isCont())return e=e.write(41),r.Writer.done()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f,u,a,p)},t}(r.Writer),F=function(e){function t(r,t,i,n){var o=e.call(this)||this;return o._text=r,o._index=t,o._escape=i,o._step=n,o}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._text,this._index,this._escape,this._step)},t.sizeOf=function(e){for(var t=0,i=0,n=e.length;i<n;i=e.offsetByCodePoints(i,1)){var o=e.codePointAt(i);void 0===o&&(o=e.charCodeAt(i)),t+=36===o||64===o||91===o||92===o||93===o||123===o||125===o||8===o||12===o||10===o||13===o||9===o?2:o<32?6:r.Utf8.sizeOf(o)}return t},t.write=function(e,i,n,o,s){void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=1);for(var f=i.length;e.isCont();)if(1===s){if(!(n<f))return r.Writer.done();var u=i.codePointAt(n);void 0===u&&(u=i.charCodeAt(n)),n=i.offsetByCodePoints(n,1),36===u||64===u||91===u||92===u||93===u||123===u||125===u?(e=e.write(92),o=u,s=2):8===u?(e=e.write(92),o=98,s=2):12===u?(e=e.write(92),o=102,s=2):10===u?(e=e.write(92),o=110,s=2):13===u?(e=e.write(92),o=114,s=2):9===u?(e=e.write(92),o=116,s=2):u<32?(e=e.write(92),o=u,s=3):e=e.write(u)}else 2===s?(e=e.write(o),o=0,s=1):3===s?(e=e.write(117),s=4):4===s?(e=e.write(r.Base16.uppercase().encodeDigit(o>>>12&15)),s=5):5===s?(e=e.write(r.Base16.uppercase().encodeDigit(o>>>8&15)),s=6):6===s?(e=e.write(r.Base16.uppercase().encodeDigit(o>>>4&15)),s=7):7===s&&(e=e.write(r.Base16.uppercase().encodeDigit(15&o)),o=0,s=1);return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s)},t}(r.Writer),G=function(e){function t(r,t,i){var n=e.call(this)||this;return n._array=r,n._part=t,n._step=i,n}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._array,this._part,this._step)},t.sizeOf=function(e){return 1+(Math.floor(4*e/3)+3&-4)},t.write=function(e,i,n,o){if(void 0===o&&(o=1),1===o&&e.isCont()&&(e=e.write(37),o=2),2===o){if((n=n?n.pull(e):r.Base64.standard().writeUint8Array(i,e)).isDone())return n=void 0,r.Writer.done();if(n.isError())return n.asError()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o)},t}(r.Writer),U=function(e){function t(r,t){var i=e.call(this)||this;return i._ident=r,i._index=t,i}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._ident,this._index)},t.sizeOf=function(e){return r.Utf8.sizeOf(e)},t.write=function(e,i,n){var o;void 0===n&&(n=0);var s=i.length;if(0===s)return r.Writer.error(new r.WriterException("empty identifier"));for(0===n&&e.isCont()&&(void 0===(o=i.codePointAt(0))&&(o=i.charCodeAt(0)),oe.isIdentStartChar(o)&&(e=e.write(o),n=i.offsetByCodePoints(0,1)));n<s&&e.isCont();){if(void 0===(o=i.codePointAt(n))&&(o=i.charCodeAt(n)),!oe.isIdentChar(o))return r.Writer.error(new r.WriterException("invalid identifier"));e=e.write(o),n=i.offsetByCodePoints(n,1)}return n>=s?r.Writer.done():e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n)},t}(r.Writer),M=function(e){function t(r,t,i,n){var o=e.call(this)||this;return o._string=r,o._index=t,o._escape=i,o._step=n,o}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._string,this._index,this._escape,this._step)},t.sizeOf=function(e){var t=0;t+=1;for(var i=0,n=e.length;i<n;i=e.offsetByCodePoints(i,1)){var o=e.codePointAt(i);void 0===o&&(o=e.charCodeAt(i)),t+=34===o||92===o||8===o||12===o||10===o||13===o||9===o?2:o<32?6:r.Utf8.sizeOf(o)}return t+=1},t.write=function(e,i,n,o,s){void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=1),1===s&&e.isCont()&&(e=e.write(34),s=2);for(var f=i.length;s>=2&&s<=8&&e.isCont();)if(2===s){if(!(n<f)){s=9;break}var u=i.codePointAt(n);void 0===u&&(u=i.charCodeAt(n)),n=i.offsetByCodePoints(n,1),34===u||92===u?(e=e.write(92),o=u,s=3):8===u?(e=e.write(92),o=98,s=3):12===u?(e=e.write(92),o=102,s=3):10===u?(e=e.write(92),o=110,s=3):13===u?(e=e.write(92),o=114,s=3):9===u?(e=e.write(92),o=116,s=3):u<32?(e=e.write("\\"),o=u,s=4):e=e.write(u)}else 3===s?(e=e.write(o),o=0,s=2):4===s?(e=e.write(117),s=5):5===s?(e=e.write(r.Base16.uppercase().encodeDigit(o>>>12&15)),s=6):6===s?(e=e.write(r.Base16.uppercase().encodeDigit(o>>>8&15)),s=7):7===s?(e=e.write(r.Base16.uppercase().encodeDigit(o>>>4&15)),s=8):8===s&&(e=e.write(r.Base16.uppercase().encodeDigit(15&o)),o=0,s=2);return 9===s&&e.isCont()?(e=e.write(34),r.Writer.done()):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s)},t}(r.Writer),L=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._bindings=t,s._template=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._bindings,this._template,this._part,this._step)},t.sizeOf=function(e,r,t){var i=0;return i+=e.sizeOfPrimary(r),i+=4,i+=e.sizeOfValue(t)},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f)if((s=s?s.pull(e):i.writePrimary(n,e)).isDone())s=void 0,f=2;else if(s.isError())return s.asError();if(2===f&&e.isCont()&&(e=e.write(32),f=3),3===f&&e.isCont()&&(e=e.write(61),f=4),4===f&&e.isCont()&&(e=e.write(62),f=5),5===f&&e.isCont()&&(e=e.write(32),f=6),6===f){if((s=null==s?i.writeValue(o,e):s.pull(e)).isDone())return r.Writer.done();if(s.isError())return s.asError()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t}(r.Writer),K=function(e){function t(r,t,i,n,o,s,f){var u=e.call(this)||this;return u._recon=r,u._ifTerm=t,u._thenTerm=i,u._elseTerm=n,u._precedence=o,u._part=s,u._step=f,u}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._ifTerm,this._thenTerm,this._elseTerm,this._precedence,this._part,this._step)},t.sizeOf=function(e,r,t,i,n){var o=0;return e.precedence(r)>0&&e.precedence(r)<=n?(o+=1,o+=e.sizeOfItem(r),o+=1):o+=e.sizeOfItem(r),o+=3,o+=e.sizeOfItem(t),o+=3,o+=e.sizeOfItem(i)},t.write=function(e,i,n,o,s,f,u,a){if(void 0===a&&(a=1),1===a&&(i.precedence(n)>0&&i.precedence(n)<=f?e.isCont()&&(e=e.write(40),a=2):a=2),2===a)if((u=u?u.pull(e):i.writeItem(n,e)).isDone())u=void 0,a=3;else if(u.isError())return u.asError();if(3===a&&(i.precedence(n)>0&&i.precedence(n)<=f?e.isCont()&&(e=e.write(41),a=4):a=4),4===a&&e.isCont()&&(e=e.write(32),a=5),5===a&&e.isCont()&&(e=e.write(63),a=6),6===a&&e.isCont()&&(e=e.write(32),a=7),7===a)if((u=u?u.pull(e):i.writeItem(o,e)).isDone())u=void 0,a=8;else if(u.isError())return u.asError();if(8===a&&e.isCont()&&(e=e.write(32),a=9),9===a&&e.isCont()&&(e=e.write(58),a=10),10===a&&e.isCont()&&(e=e.write(32),a=11),11===a){if((u=u?u.pull(e):i.writeItem(s,e)).isDone())return r.Writer.done();if(u.isError())return u.asError()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f,u,a)},t}(r.Writer),q=function(e){function t(r,t,i,n,o,s,f){var u=e.call(this)||this;return u._recon=r,u._lhs=t,u._operator=i,u._rhs=n,u._precedence=o,u._part=s,u._step=f,u}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._lhs,this._operator,this._rhs,this._precedence,this._part,this._step)},t.sizeOf=function(e,t,i,n,o){var s=0;return e.precedence(t)<o?(s+=1,s+=e.sizeOfItem(t),s+=1):s+=e.sizeOfItem(t),s+=1,s+=r.Utf8.sizeOf(i),s+=1,e.precedence(n)<o?(s+=1,s+=e.sizeOfItem(n),s+=1):s+=e.sizeOfItem(n),s},t.write=function(e,i,n,o,s,f,u,a){if(void 0===a&&(a=1),1===a&&(i.precedence(n)<f?e.isCont()&&(e=e.write(40),a=2):a=2),2===a)if((u=u?u.pull(e):i.writeItem(n,e)).isDone())u=void 0,a=3;else if(u.isError())return u.asError();if(3===a&&(i.precedence(n)<f?e.isCont()&&(e=e.write(41),a=4):a=4),4===a&&e.isCont()&&(e=e.write(32),a=5),5===a)if((u=u?u.pull(e):r.Unicode.writeString(o,e)).isDone())u=void 0,a=6;else if(u.isError())return u.asError();if(6===a&&e.isCont()&&(e=e.write(32),a=7),7===a&&(i.precedence(s)<f?e.isCont()&&(e=e.write(40),a=8):a=8),8===a)if((u=u?u.pull(e):i.writeItem(s,e)).isDone())u=void 0,a=9;else if(u.isError())return u.asError();if(9===a){if(!(i.precedence(s)<f))return r.Writer.done();if(e.isCont())return e=e.write(41),r.Writer.done()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f,u,a)},t}(r.Writer),X=function(e){function t(r,t,i,n,o,s){var f=e.call(this)||this;return f._recon=r,f._operator=t,f._rhs=i,f._precedence=n,f._part=o,f._step=s,f}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._operator,this._rhs,this._precedence,this._part,this._step)},t.sizeOf=function(e,t,i,n){var o=0;return o+=r.Utf8.sizeOf(t),e.precedence(i)<n?(o+=1,o+=e.sizeOfItem(i),o+=1):o+=e.sizeOfItem(i),o},t.write=function(e,i,n,o,s,f,u){if(void 0===u&&(u=1),1===u)if((f=f?f.pull(e):r.Unicode.writeString(n,e)).isDone())f=void 0,u=2;else if(f.isError())return f.asError();if(2===u&&(i.precedence(o)<s?e.isCont()&&(e=e.write(40),u=3):u=3),3===u)if((f=f?f.pull(e):i.writeItem(o,e)).isDone())f=void 0,u=4;else if(f.isError())return f.asError();if(4===u){if(!(i.precedence(o)<s))return r.Writer.done();if(e.isCont())return e=e.write(41),r.Writer.done()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f,u)},t}(r.Writer),j=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._func=t,s._args=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._func,this._args,this._part,this._step)},t.sizeOf=function(e,r,t){var i=0;return i+=e.sizeOfValue(r),i+=1,i+=e.sizeOfBlockValue(t),i+=1},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f)if((s=s?s.pull(e):i.writeValue(n,e)).isDone())s=void 0,f=2;else if(s.isError())return s.asError();if(2===f&&e.isCont()&&(e=e.write(40),f=3),3===f)if((s=s?s.pull(e):i.writeBlockValue(o,e)).isDone())s=void 0,f=4;else if(s.isError())return s.asError();return 4===f&&e.isCont()?(e=e.write(41),r.Writer.done()):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t}(r.Writer),H=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._item=t,s._then=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._item,this._then,this._part,this._step)},t.sizeOf=function(e,r,t){var i=0;return e.precedence(r)<e.precedence(e.item(t))?(i+=1,i+=e.sizeOfItem(r),i+=1):i+=e.sizeOfItem(r),i+=e.sizeOfThen(t)},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f&&(i.precedence(n)<i.precedence(i.item(o))?e.isCont()&&(e=e.write(40),f=2):f=2),2===f)if((s=s?s.pull(e):i.writeItem(n,e)).isDone())s=void 0,f=3;else if(s.isError())return s.asError();return 3===f&&(i.precedence(n)<i.precedence(i.item(o))?e.isCont()&&(e=e.write(41),f=4):f=4),4===f?i.writeThen(o,e):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t}(r.Writer),J=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._key=t,s._then=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._key,this._then,this._part,this._step)},t.sizeOf=function(e,r,t){var i=1;return e.isRecord(e.item(r))?(i+=1,i+=e.sizeOfBlockValue(r),i+=1):i+=e.sizeOfValue(r),i+=e.sizeOfThen(t)},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f&&e.isCont()?(e=e.write(36),f=3):2===f&&e.isCont()&&(e=e.write(46),f=3),3===f&&(i.isRecord(i.item(n))?e.isCont()&&(e=e.write(123),f=4):f=4),4===f)if((s=s?s.pull(e):i.isRecord(i.item(n))?i.writeBlockValue(n,e):i.writeValue(n,e)).isDone())s=void 0,f=5;else if(s.isError())return s.asError();return 5===f&&(i.isRecord(i.item(n))?e.isCont()&&(e=e.write(125),f=6):f=6),6===f?i.writeThen(o,e):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t.writeThen=function(e,r,i,n){return t.write(e,r,i,n,void 0,2)},t}(r.Writer),Q=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._key=t,s._then=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._key,this._then,this._part,this._step)},t.sizeOf=function(e,r,t){var i=2;return i+=e.sizeOfValue(r),i+=e.sizeOfThen(t)},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f&&e.isCont()?(e=e.write(36),f=3):2===f&&e.isCont()&&(e=e.write(46),f=3),3===f&&e.isCont()&&(e=e.write(64),f=4),4===f){if((s=s?s.pull(e):i.writeValue(n,e)).isDone())return i.writeThen(o,e);if(s.isError())return s.asError()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t.writeThen=function(e,r,i,n){return t.write(e,r,i,n,void 0,2)},t}(r.Writer),Y=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._index=t,s._then=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._index,this._then,this._part,this._step)},t.sizeOf=function(e,r,t){var i=2;return i+=e.sizeOfValue(r),i+=e.sizeOfThen(t)},t.sizeOfThen=function(e,r,t){var i=1;return i+=e.sizeOfValue(r),i+=e.sizeOfThen(t)},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f&&e.isCont()&&(e=e.write(36),f=2),2===f&&e.isCont()&&(e=e.write(35),f=3),3===f){if((s=s?s.pull(e):i.writeValue(n,e)).isDone())return i.writeThen(o,e);if(s.isError())return s.asError()}return e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t.writeThen=function(e,r,i,n){return t.write(e,r,i,n,void 0,2)},t}(r.Writer),Z=function(e){function t(r,t,i){var n=e.call(this)||this;return n._recon=r,n._then=t,n._step=i,n}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._then,this._step)},t.sizeOf=function(e,r){var t=3;return t+=e.sizeOfThen(r)},t.write=function(e,i,n,o){return void 0===o&&(o=1),1===o&&e.isCont()?(e=e.write(36),o=3):2===o&&e.isCont()&&(e=e.write(46),o=3),3===o&&e.isCont()&&(e=e.write(42),o=4),4===o&&e.isCont()?(e=e.write(58),i.writeThen(n,e)):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o)},t.writeThen=function(e,r,i){return t.write(e,r,i,2)},t}(r.Writer),$=function(e){function t(r,t,i){var n=e.call(this)||this;return n._recon=r,n._then=t,n._step=i,n}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._then,this._step)},t.sizeOf=function(e,r){var t=3;return t+=e.sizeOfThen(r)},t.write=function(e,i,n,o){return void 0===o&&(o=1),1===o&&e.isCont()?(e=e.write(36),o=3):2===o&&e.isCont()&&(e=e.write(46),o=3),3===o&&e.isCont()&&(e=e.write(58),o=4),4===o&&e.isCont()?(e=e.write(42),i.writeThen(n,e)):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o)},t.writeThen=function(e,r,i){return t.write(e,r,i,2)},t}(r.Writer),ee=function(e){function t(r,t,i){var n=e.call(this)||this;return n._recon=r,n._then=t,n._step=i,n}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._then,this._step)},t.sizeOf=function(e,r){var t=2;return t+=e.sizeOfThen(r)},t.write=function(e,i,n,o){return void 0===o&&(o=1),1===o&&e.isCont()?(e=e.write(36),o=3):2===o&&e.isCont()&&(e=e.write(46),o=3),3===o&&e.isCont()?(e=e.write(42),i.writeThen(n,e)):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o)},t.writeThen=function(e,r,i){return t.write(e,r,i,2)},t}(r.Writer),re=function(e){function t(r,t,i){var n=e.call(this)||this;return n._recon=r,n._then=t,n._step=i,n}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._then,this._step)},t.sizeOf=function(e,r){var t=3;return t+=e.sizeOfThen(r)},t.write=function(e,i,n,o){return void 0===o&&(o=1),1===o&&e.isCont()?(e=e.write(36),o=3):2===o&&e.isCont()&&(e=e.write(46),o=3),3===o&&e.isCont()&&(e=e.write(42),o=4),4===o&&e.isCont()?(e=e.write(42),i.writeThen(n,e)):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o)},t.writeThen=function(e,r,i){return t.write(e,r,i,2)},t}(r.Writer),te=function(e){function t(r,t,i,n,o){var s=e.call(this)||this;return s._recon=r,s._predicate=t,s._then=i,s._part=n,s._step=o,s}return n(t,e),t.prototype.pull=function(e){return t.write(e,this._recon,this._predicate,this._then,this._part,this._step)},t.sizeOf=function(e,r,t){var i=2;return i+=e.sizeOfValue(r),i+=1,i+=e.sizeOfThen(t)},t.sizeOfThen=function(e,r,t){var i=1;return i+=e.sizeOfValue(r),i+=1,i+=e.sizeOfThen(t)},t.write=function(e,i,n,o,s,f){if(void 0===f&&(f=1),1===f&&e.isCont()&&(e=e.write(36),f=2),2===f&&e.isCont()&&(e=e.write(91),f=3),3===f)if((s=s?s.pull(e):i.writeValue(n,e)).isDone())s=void 0,f=4;else if(s.isError())return s.asError();return 4===f&&e.isCont()?(e=e.write(93),i.writeThen(o,e)):e.isDone()?r.Writer.error(new r.WriterException("truncated")):e.isError()?r.Writer.error(e.trap()):new t(i,n,o,s,f)},t.writeThen=function(e,r,i,n){return t.write(e,r,i,n,void 0,2)},t}(r.Writer),ie=function(){function e(){}return e.prototype.sizeOfAttr=function(e,r){return A.sizeOf(this,e,r)},e.prototype.writeAttr=function(e,r,t){return A.write(t,this,e,r)},e.prototype.sizeOfSlot=function(e,r){return V.sizeOf(this,e,r)},e.prototype.writeSlot=function(e,r,t){return V.write(t,this,e,r)},e.prototype.sizeOfBlock=function(e,r,t){if(3===arguments.length)return N.sizeOf(this,e,r,t);var i=this.items(e);return i.hasNext()?N.sizeOf(this,i,this.isBlockSafe(this.items(e)),!1):2},e.prototype.writeBlock=function(e,t,i,n){if(4===arguments.length)return N.write(t,this,e,i,n);var o=this.items(e);return o.hasNext()?N.write(t,this,o,this.isBlockSafe(this.items(e)),!1):r.Unicode.writeString("{}",t)},e.prototype.sizeOfRecord=function(e){var r=this.items(e);return r.hasNext()?N.sizeOf(this,r,!1,!1):2},e.prototype.writeRecord=function(e,t){var i=this.items(e);return i.hasNext()?N.write(t,this,i,!1,!1):r.Unicode.writeString("{}",t)},e.prototype.sizeOfPrimary=function(e){if(this.isRecord(this.item(e))){var r=this.items(this.item(e));if(r.hasNext())return R.sizeOf(this,r)}else if(!this.isExtant(this.item(e)))return this.sizeOfValue(e);return 2},e.prototype.writePrimary=function(e,t){if(this.isRecord(this.item(e))){var i=this.items(this.item(e));if(i.hasNext())return R.write(t,this,i)}else if(!this.isExtant(this.item(e)))return this.writeValue(e,t);return r.Unicode.writeString("()",t)},e.prototype.isBlockSafe=function(e){for(;e.hasNext();)if(this.isAttr(e.next().value))return!1;return!0},e.prototype.isMarkupSafe=function(e){if(!e.hasNext()||!this.isAttr(e.next().value))return!1;for(;e.hasNext();)if(this.isAttr(e.next().value))return!1;return!0},e.prototype.sizeOfMarkupText=function(e){return"string"!=typeof e&&(e=this.string(e)),F.sizeOf(e)},e.prototype.writeMarkupText=function(e,r){return"string"!=typeof e&&(e=this.string(e)),F.write(r,e)},e.prototype.sizeOfData=function(e){return G.sizeOf(e)},e.prototype.writeData=function(e,t){return e?G.write(t,e):r.Unicode.writeString("%",t)},e.prototype.isIdent=function(e){"string"!=typeof e&&(e=this.string(e));var r,t=e.length;if(0===t||void 0!==(r=e.codePointAt(0))&&!oe.isIdentStartChar(r))return!1;for(var i=e.offsetByCodePoints(0,1);i<t;i=e.offsetByCodePoints(i,1))if(void 0===(r=e.codePointAt(i))||!oe.isIdentChar(r))return!1;return!0},e.prototype.sizeOfText=function(e){return this.isIdent(e)?U.sizeOf(e):M.sizeOf(e)},e.prototype.writeText=function(e,r){return this.isIdent(e)?U.write(r,e):M.write(r,e)},e.prototype.sizeOfNum=function(e){if(isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<2147483648){var t=r.Base10.countDigits(e);return e<0&&(t+=1),t}return(""+e).length},e.prototype.writeNum=function(e,t){return isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<2147483648?r.Base10.writeInteger(e,t):r.Unicode.writeString(""+e,t)},e.prototype.sizeOfUint32=function(e){return 10},e.prototype.writeUint32=function(e,t){return r.Base16.lowercase().writeIntegerLiteral(e,t,8)},e.prototype.sizeOfUint64=function(e){return 18},e.prototype.writeUint64=function(e,t){return r.Base16.lowercase().writeIntegerLiteral(e,t,16)},e.prototype.sizeOfBool=function(e){return e?4:5},e.prototype.writeBool=function(e,t){return r.Unicode.writeString(e?"true":"false",t)},e.prototype.sizeOfLambdaFunc=function(e,r){return L.sizeOf(this,e,r)},e.prototype.writeLambdaFunc=function(e,r,t){return L.write(t,this,e,r)},e.prototype.sizeOfConditionalOperator=function(e,r,t,i){return K.sizeOf(this,e,r,t,i)},e.prototype.writeConditionalOperator=function(e,r,t,i,n){return K.write(n,this,e,r,t,i)},e.prototype.sizeOfInfixOperator=function(e,r,t,i){return q.sizeOf(this,e,r,t,i)},e.prototype.writeInfixOperator=function(e,r,t,i,n){return q.write(n,this,e,r,t,i)},e.prototype.sizeOfPrefixOperator=function(e,r,t){return X.sizeOf(this,e,r,t)},e.prototype.writePrefixOperator=function(e,r,t,i){return X.write(i,this,e,r,t)},e.prototype.sizeOfInvokeOperator=function(e,r){return j.sizeOf(this,e,r)},e.prototype.writeInvokeOperator=function(e,r,t){return j.write(t,this,e,r)},e.prototype.sizeOfIdentitySelector=function(){return 0},e.prototype.writeIdentitySelector=function(e){return r.Writer.done()},e.prototype.sizeOfThenIdentitySelector=function(){return 0},e.prototype.writeThenIdentitySelector=function(e){return r.Writer.done()},e.prototype.sizeOfLiteralSelector=function(e,r){return H.sizeOf(this,e,r)},e.prototype.writeLiteralSelector=function(e,r,t){return H.write(t,this,e,r)},e.prototype.sizeOfThenLiteralSelector=function(e,r){return 0},e.prototype.writeThenLiteralSelector=function(e,t,i){return r.Writer.done()},e.prototype.sizeOfGetSelector=function(e,r){return J.sizeOf(this,e,r)},e.prototype.writeGetSelector=function(e,r,t){return J.write(t,this,e,r)},e.prototype.sizeOfThenGetSelector=function(e,r){return J.sizeOf(this,e,r)},e.prototype.writeThenGetSelector=function(e,r,t){return J.writeThen(t,this,e,r)},e.prototype.sizeOfGetAttrSelector=function(e,r){return Q.sizeOf(this,e,r)},e.prototype.writeGetAttrSelector=function(e,r,t){return Q.write(t,this,e,r)},e.prototype.sizeOfThenGetAttrSelector=function(e,r){return Q.sizeOf(this,e,r)},e.prototype.writeThenGetAttrSelector=function(e,r,t){return Q.writeThen(t,this,e,r)},e.prototype.sizeOfGetItemSelector=function(e,r){return Y.sizeOf(this,e,r)},e.prototype.writeGetItemSelector=function(e,r,t){return Y.write(t,this,e,r)},e.prototype.sizeOfThenGetItemSelector=function(e,r){return Y.sizeOfThen(this,e,r)},e.prototype.writeThenGetItemSelector=function(e,r,t){return Y.writeThen(t,this,e,r)},e.prototype.sizeOfKeysSelector=function(e){return Z.sizeOf(this,e)},e.prototype.writeKeysSelector=function(e,r){return Z.write(r,this,e)},e.prototype.sizeOfThenKeysSelector=function(e){return Z.sizeOf(this,e)},e.prototype.writeThenKeysSelector=function(e,r){return Z.writeThen(r,this,e)},e.prototype.sizeOfValuesSelector=function(e){return $.sizeOf(this,e)},e.prototype.writeValuesSelector=function(e,r){return $.write(r,this,e)},e.prototype.sizeOfThenValuesSelector=function(e){return $.sizeOf(this,e)},e.prototype.writeThenValuesSelector=function(e,r){return $.writeThen(r,this,e)},e.prototype.sizeOfChildrenSelector=function(e){return ee.sizeOf(this,e)},e.prototype.writeChildrenSelector=function(e,r){return ee.write(r,this,e)},e.prototype.sizeOfThenChildrenSelector=function(e){return ee.sizeOf(this,e)},e.prototype.writeThenChildrenSelector=function(e,r){return ee.writeThen(r,this,e)},e.prototype.sizeOfDescendantsSelector=function(e){return re.sizeOf(this,e)},e.prototype.writeDescendantsSelector=function(e,r){return re.write(r,this,e)},e.prototype.sizeOfThenDescendantsSelector=function(e){return re.sizeOf(this,e)},e.prototype.writeThenDescendantsSelector=function(e,r){return re.writeThen(r,this,e)},e.prototype.sizeOfFilterSelector=function(e,r){return te.sizeOf(this,e,r)},e.prototype.writeFilterSelector=function(e,r,t){return te.write(t,this,e,r)},e.prototype.sizeOfThenFilterSelector=function(e,r){return te.sizeOfThen(this,e,r)},e.prototype.writeThenFilterSelector=function(e,r,t){return te.writeThen(t,this,e,r)},e.prototype.sizeOfExtant=function(){return 0},e.prototype.writeExtant=function(e){return r.Writer.done()},e.prototype.sizeOfAbsent=function(){return 0},e.prototype.writeAbsent=function(e){return r.Writer.done()},e}(),ne=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n(i,e),i.prototype.isField=function(e){return e instanceof t.Field},i.prototype.isAttr=function(e){return e instanceof t.Attr},i.prototype.isSlot=function(e){return e instanceof t.Slot},i.prototype.isValue=function(e){return e instanceof t.Value},i.prototype.isRecord=function(e){return e instanceof t.Record},i.prototype.isText=function(e){return e instanceof t.Text},i.prototype.isNum=function(e){return e instanceof t.Num},i.prototype.isBool=function(e){return e instanceof t.Bool},i.prototype.isExpression=function(e){return e instanceof t.Expression},i.prototype.isExtant=function(e){return e instanceof t.Extant},i.prototype.items=function(e){return e.iterator()},i.prototype.item=function(e){return e},i.prototype.key=function(e){return e.key},i.prototype.value=function(e){return e.toValue()},i.prototype.string=function(e){return e.stringValue("")},i.prototype.precedence=function(e){return e.precedence()},i.prototype.sizeOfItem=function(e){if(e instanceof t.Field){if(e instanceof t.Attr)return this.sizeOfAttr(e.key,e.value);if(e instanceof t.Slot)return this.sizeOfSlot(e.key,e.value)}else if(e instanceof t.Value)return this.sizeOfValue(e);throw new r.WriterException("No Recon serialization for "+e)},i.prototype.writeItem=function(e,i){if(e instanceof t.Field){if(e instanceof t.Attr)return this.writeAttr(e.key,e.value,i);if(e instanceof t.Slot)return this.writeSlot(e.key,e.value,i)}else if(e instanceof t.Value)return this.writeValue(e,i);return r.Writer.error(new r.WriterException("No Recon serialization for "+e))},i.prototype.sizeOfValue=function(e){if(e instanceof t.Record)return this.sizeOfRecord(e);if(e instanceof t.Data)return this.sizeOfData(e.size);if(e instanceof t.Text)return this.sizeOfText(e.value);if(e instanceof t.Num)return e.isUint32()?this.sizeOfUint32(e.value):e.isUint64()?this.sizeOfUint64(e.value):this.sizeOfNum(e.value);if(e instanceof t.Bool)return this.sizeOfBool(e.value);if(e instanceof t.Selector)return this.sizeOfSelector(e);if(e instanceof t.Operator)return this.sizeOfOperator(e);if(e instanceof t.Func)return this.sizeOfFunc(e);if(e instanceof t.Extant)return this.sizeOfExtant();if(e instanceof t.Absent)return this.sizeOfAbsent();throw new r.WriterException("No Recon serialization for "+e)},i.prototype.writeValue=function(e,i){return e instanceof t.Record?this.writeRecord(e,i):e instanceof t.Data?this.writeData(e.asUint8Array(),i):e instanceof t.Text?this.writeText(e.value,i):e instanceof t.Num?e.isUint32()?this.writeUint32(e.value,i):e.isUint64()?this.writeUint64(e.value,i):this.writeNum(e.value,i):e instanceof t.Bool?this.writeBool(e.value,i):e instanceof t.Selector?this.writeSelector(e,i):e instanceof t.Operator?this.writeOperator(e,i):e instanceof t.Func?this.writeFunc(e,i):e instanceof t.Extant?this.writeExtant(i):e instanceof t.Absent?this.writeAbsent(i):r.Writer.error(new r.WriterException("No Recon serialization for "+e))},i.prototype.sizeOfSelector=function(e){if(e instanceof t.IdentitySelector)return this.sizeOfIdentitySelector();if(e instanceof t.LiteralSelector)return this.sizeOfLiteralSelector(e.item(),e.then());if(e instanceof t.GetSelector)return this.sizeOfGetSelector(e.accessor(),e.then());if(e instanceof t.GetAttrSelector)return this.sizeOfGetAttrSelector(e.accessor(),e.then());if(e instanceof t.GetItemSelector)return this.sizeOfGetItemSelector(e.accessor(),e.then());if(e instanceof t.KeysSelector)return this.sizeOfKeysSelector(e.then());if(e instanceof t.ValuesSelector)return this.sizeOfValuesSelector(e.then());if(e instanceof t.ChildrenSelector)return this.sizeOfChildrenSelector(e.then());if(e instanceof t.DescendantsSelector)return this.sizeOfDescendantsSelector(e.then());if(e instanceof t.FilterSelector)return this.sizeOfFilterSelector(e.predicate(),e.then());throw new r.WriterException("No Recon serialization for "+e)},i.prototype.writeSelector=function(e,i){return e instanceof t.IdentitySelector?this.writeIdentitySelector(i):e instanceof t.LiteralSelector?this.writeLiteralSelector(e.item(),e.then(),i):e instanceof t.GetSelector?this.writeGetSelector(e.accessor(),e.then(),i):e instanceof t.GetAttrSelector?this.writeGetAttrSelector(e.accessor(),e.then(),i):e instanceof t.GetItemSelector?this.writeGetItemSelector(e.accessor(),e.then(),i):e instanceof t.KeysSelector?this.writeKeysSelector(e.then(),i):e instanceof t.ValuesSelector?this.writeValuesSelector(e.then(),i):e instanceof t.ChildrenSelector?this.writeChildrenSelector(e.then(),i):e instanceof t.DescendantsSelector?this.writeDescendantsSelector(e.then(),i):e instanceof t.FilterSelector?this.writeFilterSelector(e.predicate(),e.then(),i):r.Writer.error(new r.WriterException("No Recon serialization for "+e))},i.prototype.sizeOfOperator=function(e){if(e instanceof t.BinaryOperator)return this.sizeOfInfixOperator(e.operand1(),e.operator(),e.operand2(),e.precedence());if(e instanceof t.UnaryOperator)return this.sizeOfPrefixOperator(e.operator(),e.operand(),e.precedence());if(e instanceof t.InvokeOperator)return this.sizeOfInvokeOperator(e.func(),e.args());if(e instanceof t.ConditionalOperator)return this.sizeOfConditionalOperator(e.ifTerm(),e.thenTerm(),e.elseTerm(),e.precedence());throw new r.WriterException("No Recon serialization for "+e)},i.prototype.writeOperator=function(e,i){return e instanceof t.BinaryOperator?this.writeInfixOperator(e.operand1(),e.operator(),e.operand2(),e.precedence(),i):e instanceof t.UnaryOperator?this.writePrefixOperator(e.operator(),e.operand(),e.precedence(),i):e instanceof t.InvokeOperator?this.writeInvokeOperator(e.func(),e.args(),i):e instanceof t.ConditionalOperator?this.writeConditionalOperator(e.ifTerm(),e.thenTerm(),e.elseTerm(),e.precedence(),i):r.Writer.error(new r.WriterException("No Recon serialization for "+e))},i.prototype.sizeOfFunc=function(e){if(e instanceof t.LambdaFunc)return this.sizeOfLambdaFunc(e.bindings(),e.template());if(e instanceof t.BridgeFunc)return 0;throw new r.WriterException("No Recon serialization for "+e)},i.prototype.writeFunc=function(e,i){return e instanceof t.LambdaFunc?this.writeLambdaFunc(e.bindings(),e.template(),i):e instanceof t.BridgeFunc?r.Writer.done():r.Writer.error(new r.WriterException("No Recon serialization for "+e))},i.prototype.sizeOfBlockItem=function(e){if(e instanceof t.Field)return this.sizeOfItem(e);if(e instanceof t.Value)return this.sizeOfBlockValue(e);throw new r.WriterException("No Recon serialization for "+e)},i.prototype.writeBlockItem=function(e,i){return e instanceof t.Field?this.writeItem(e,i):e instanceof t.Value?this.writeBlockValue(e,i):r.Writer.error(new r.WriterException("No Recon serialization for "+e))},i.prototype.sizeOfBlockValue=function(e){return e instanceof t.Record?this.sizeOfBlock(e):this.sizeOfValue(e)},i.prototype.writeBlockValue=function(e,r){return e instanceof t.Record?this.writeBlock(e,r):this.writeValue(e,r)},i.prototype.sizeOfThen=function(e){if(e instanceof t.Selector){if(e instanceof t.IdentitySelector)return this.sizeOfThenIdentitySelector();if(e instanceof t.LiteralSelector)return this.sizeOfThenLiteralSelector(e.item(),e.then());if(e instanceof t.GetSelector)return this.sizeOfThenGetSelector(e.accessor(),e.then());if(e instanceof t.GetAttrSelector)return this.sizeOfThenGetAttrSelector(e.accessor(),e.then());if(e instanceof t.GetItemSelector)return this.sizeOfThenGetItemSelector(e.accessor(),e.then());if(e instanceof t.KeysSelector)return this.sizeOfThenKeysSelector(e.then());if(e instanceof t.ValuesSelector)return this.sizeOfThenValuesSelector(e.then());if(e instanceof t.ChildrenSelector)return this.sizeOfThenChildrenSelector(e.then());if(e instanceof t.DescendantsSelector)return this.sizeOfThenDescendantsSelector(e.then());if(e instanceof t.FilterSelector)return this.sizeOfThenFilterSelector(e.predicate(),e.then())}throw new r.WriterException("No Recon serialization for "+e)},i.prototype.writeThen=function(e,i){if(e instanceof t.Selector){if(e instanceof t.IdentitySelector)return this.writeThenIdentitySelector(i);if(e instanceof t.LiteralSelector)return this.writeThenLiteralSelector(e.item(),e.then(),i);if(e instanceof t.GetSelector)return this.writeThenGetSelector(e.accessor(),e.then(),i);if(e instanceof t.GetAttrSelector)return this.writeThenGetAttrSelector(e.accessor(),e.then(),i);if(e instanceof t.GetItemSelector)return this.writeThenGetItemSelector(e.accessor(),e.then(),i);if(e instanceof t.KeysSelector)return this.writeThenKeysSelector(e.then(),i);if(e instanceof t.ValuesSelector)return this.writeThenValuesSelector(e.then(),i);if(e instanceof t.ChildrenSelector)return this.writeThenChildrenSelector(e.then(),i);if(e instanceof t.DescendantsSelector)return this.writeThenDescendantsSelector(e.then(),i);if(e instanceof t.FilterSelector)return this.writeThenFilterSelector(e.predicate(),e.then(),i)}return r.Writer.error(new r.WriterException("No Recon serialization for "+e))},i}(ie),oe=function(){function e(){}return e.isSpace=function(e){return 32===e||9===e},e.isNewline=function(e){return 10===e||13===e},e.isWhitespace=function(r){return e.isSpace(r)||e.isNewline(r)},e.isIdentStartChar=function(e){return e>=65&&e<=90||95===e||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039},e.isIdentChar=function(e){return 45===e||e>=48&&e<=57||e>=65&&e<=90||95===e||e>=97&&e<=122||183===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039},e.structureParser=function(){return e._structureParser||(e._structureParser=new T),e._structureParser},e.structureWriter=function(){return e._structureWriter||(e._structureWriter=new ne),e._structureWriter},e.parse=function(r){return e.structureParser().parseBlockString(r)},e.parser=function(){return e.structureParser().blockParser()},e.sizeOf=function(r){return e.structureWriter().sizeOfItem(r)},e.sizeOfBlock=function(r){return e.structureWriter().sizeOfBlockItem(r)},e.write=function(r,t){return e.structureWriter().writeItem(r,t)},e.writeBlock=function(r,t){return e.structureWriter().writeBlockItem(r,t)},e.toString=function(t){var i=r.Unicode.stringOutput();return e.write(t,i),i.bind()},e.toBlockString=function(t){var i=r.Unicode.stringOutput();return e.writeBlock(t,i),i.bind()},e.toData=function(i){var n=r.Utf8.encodedOutput(t.Data.output());return e.write(i,n),n.bind()},e.toBlockData=function(i){var n=r.Utf8.encodedOutput(t.Data.output());return e.writeBlock(i,n),n.bind()},e}();t.Item.prototype.toRecon=function(){return oe.toString(this)},t.Item.prototype.toReconBlock=function(){return oe.toBlockString(this)},t.Value.parseRecon=function(e){return oe.parse(e)},e.Recon=oe,e.ReconParser=I,e.ReconStructureParser=T,e.ReconStructureWriter=ne,e.ReconWriter=ie,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=swim-recon.min.js.map